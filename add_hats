#add_hats.py
#Description: This file can be used to add hats to generated TerminalTots that have backdrops.
#Author: Trevor Foresta
#Date Written: 8/30/2021
#Date Last Modified: 8/30/2021

import glob
from PIL import Image
from itertools import cycle, islice

#Pathways for backdrop tots and hat assets
BGtots = glob.glob ('GeneratedBG/*')
hats = glob.glob ('Hats/*')

BGtot_iter = iter(BGtots)
COUNT = 0

# increment - counter used for naming convention
def increment():
    global COUNT
    COUNT = COUNT+1

# repeatlist - resets faces iterator for next body
# note: may also use this function for future accessories
def repeatlist(it, count):
    return islice(cycle(it), count)

# add_hats - for given BGtot, paste every possible hat
def add_hats(BGtot, hat):
    hat_iter = iter(hats)
    for n in range(len(hats)):
        hat = Image.open(next(hat_iter))
        BGtot.paste(face, (80,15), mask=0)
        increment()
        BGtot.save("GeneratedFinal/" + (str(COUNT).zfill(4)), "PNG")
        repeatlist(hats, len(BGtots))

# main - shows available assets, generates Tots
def main():

    for index in range(len(BGtots)):
        for hat in hats:
            BGtot = Image.open(next(BGtot_iter))
            add_hats(BGtot, hat)
        
main()


